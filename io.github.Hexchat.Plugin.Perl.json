{
  "id": "io.github.Hexchat.Plugin.Perl",
  "branch": "2",
  "runtime": "io.github.Hexchat",
  "runtime-version": "stable",
  "sdk": "org.gnome.Sdk//3.28",
  "build-extension": true,
  "separate-locales": false,
  "appstream-compose": false,
  "build-options": {
    "prefix": "/app/extensions/Perl",
    "prepend-path": "/app/extensions/Perl/bin"
  },
  "modules": [
    {
      "name": "perl",
      "no-autogen": true,
      "config-opts": [
        "-des",
        "-Duseshrplib"
      ],
      "build-options": {
        "cflags": "-fPIC",
        "ldflags": "-fpic"
      },
      "cleanup": [
        "/bin",
        "/man",
        "/lib/perl5/site_perl",
        "*.pod",
        "*.h"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://www.cpan.org/src/5.0/perl-5.28.0.tar.gz",
          "sha256": "7e929f64d4cb0e9d1159d4a59fc89394e27fa1f7004d0836ca0d514685406ea8"
        },
        {
          "type": "script",
          "dest-filename": "configure",
          "commands": [
            "exec ./configure.gnu $@"
          ]
        }
      ]
    },
    {
      "name": "hexchat",
      "buildsystem": "meson",
      "config-opts": [
        "--buildtype=release",
        "-Dwith-lua=false"
      ],
      "make-args": [
        "plugins/perl/perl.so"
      ],
      "no-make-install": true,
      "post-install": [
        "install -Dm644 plugins/perl/perl.so ${FLATPAK_DEST}/lib/hexchat/plugins/perl.so",
        "install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo data/misc/io.github.Hexchat.Plugin.Perl.metainfo.xml",
        "appstream-compose --basename=io.github.Hexchat.Plugin.Perl --prefix=${FLATPAK_DEST} --origin=flatpak io.github.Hexchat.Plugin.Perl"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://dl.hexchat.net/hexchat/hexchat-2.14.2.tar.xz",
          "sha256": "7792b9e52560fbd3e10d75bfb5d138a20913a87771d676d296547f1b4ac09618"
        }
      ]
    }
  ]
}
