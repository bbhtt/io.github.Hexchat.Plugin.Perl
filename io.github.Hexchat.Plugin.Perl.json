{
  "id": "io.github.Hexchat.Plugin.Perl",
  "branch": "2",
  "runtime": "io.github.Hexchat",
  "runtime-version": "stable",
  "sdk": "org.gnome.Sdk//3.26",
  "build-extension": true,
  "separate-locales": false,
  "appstream-compose": false,
  "modules": [
    {
      "name": "perl",
      "no-autogen": true,
      "config-opts": [
        "-des",
        "-Duseshrplib"
      ],
      "build-options": {
        "cflags": "-fPIC",
        "ldflags": "-fpic",
        "prefix": "$FLATPAK_DEST",
        "no-debuginfo": true
      },
      "cleanup": [
        "/bin",
        "/man",
        "/lib/perl5/site_perl",
        "*.pod",
        "*.h"
      ],
      "sources": [
        {
          "type": "archive",
          "url": "https://www.cpan.org/src/5.0/perl-5.26.1.tar.gz",
          "sha256": "e763aa485e8dc1a70483dbe6d615986bbf32b977f38016480d68c99237e701dd"
        },
        {
          "type": "script",
          "dest-filename": "configure",
          "commands": [
            "exec ./configure.gnu $@"
          ]
        }
      ]
    },
    {
      "name": "hexchat",
      "buildsystem": "meson",
      "config-opts": [
        "--buildtype=release",
        "-Dwith-lua=false"
      ],
      "build-options": {
        "env": {
          "PATH": "/app/extensions/Perl/bin:/app/bin:/usr/bin"
        }
      },
      "make-args": [
        "plugins/perl/perl.so"
      ],
      "no-make-install": true,
      "post-install": [
        "install -Dm644 plugins/perl/perl.so ${FLATPAK_DEST}/lib/hexchat/plugins/perl.so",
        "install -Dm644 --target-directory=${FLATPAK_DEST}/share/metainfo data/misc/io.github.Hexchat.Plugin.Perl.metainfo.xml",
        "appstream-compose --basename=io.github.Hexchat.Plugin.Perl --prefix=${FLATPAK_DEST} --origin=flatpak io.github.Hexchat.Plugin.Perl"
      ],
      "sources": [
        {
          "type": "git",
          "url": "https://github.com/hexchat/hexchat.git",
          "commit": "da56297c5ac0a425cd2eaaa8091dc83621ce3c38"
        }
      ]
    }
  ]
}
